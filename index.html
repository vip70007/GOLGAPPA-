<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AAO GOLGAPPA KHAO</title>
<style>
body { margin:0; font-family:Arial,sans-serif; background:linear-gradient(135deg,#ffeb99,#ffcc66,#ff99cc,#66ccff); text-align:center; }
.container { margin:auto; padding:20px; border:4px solid #333; background:#fff8dc; border-radius:12px; box-sizing:border-box; position:relative; }
h1 { font-size:24px; margin:5px; color:#d2691e; }
input[type="text"] { padding:8px; font-size:16px; width:180px; margin:8px; }
button { padding:8px 16px; font-size:14px; margin:6px; border:none; border-radius:6px; color:white; cursor:pointer; }
button:hover { opacity:0.8; }
#submit-btn { background:darkmagenta; }
#play-btn { background:green; }
#instr-btn { background:red; }
#admin-btn { background:darkblue; margin-top:8px; }
#eat-btn { background:darkgreen; }
.thela, .boy { position:absolute; top:50%; width:100px; transform:translateY(-50%); }
.thela { left:15%; }
.boy { right:15%; }
.game-screen { display:none; position:relative; width:650px; height:420px; margin:auto; }
.golgappa { position:absolute; top:180px; width:40px; display:none; transition:0.2s; }
.sparkle { animation: sparkle 0.8s infinite; border-radius:50%; }
@keyframes sparkle {
  0% { transform:rotate(0deg) scale(1); box-shadow:0 0 5px gold; }
  50% { transform:rotate(20deg) scale(1.2); box-shadow:0 0 15px gold; }
  100% { transform:rotate(0deg) scale(1); box-shadow:0 0 5px gold; }
}
.stomach-bar { position:absolute; right:20px; top:20px; width:30px; height:200px; border:2px solid #333; background:#eee; }
.stomach-fill { width:100%; height:0; background:green; position:absolute; bottom:0; }
#score, #timer { font-size:20px; margin:5px; }
.game-over { display:none; margin-top:20px; padding:15px; border-radius:10px; background:#ffe066; color:#b30000; }
.game-over h2 { font-size:28px; margin:0; color:#ff3300; text-shadow:1px 1px 2px #000; }
.game-over p { font-size:22px; margin-top:10px; font-weight:bold; color:#006600; }
.admin-panel { display:none; text-align:left; padding:10px; background:#fff8dc; border-radius:10px; margin-top:10px; }
.admin-panel h2 { text-align:center; }
.admin-panel button { background:darkslategray; color:white; padding:6px 12px; border-radius:6px; margin:4px; cursor:pointer; }
.admin-panel button:hover { opacity:0.8; }
</style>
</head>
<body>

<!-- Start Screen -->
<div class="container" id="start-screen" style="width:400px; height:400px;">
  <h1 style="margin-bottom:12px;">AAO GOLGAPPA KHAO</h1>
  <input type="text" id="mobile" maxlength="10" placeholder="Enter 10-digit Mobile"><br>
  <button id="submit-btn" onclick="submitMobile()">Submit</button><br><br>

  <img src="thela.png" class="thela">
  <img src="boy.png" class="boy"><br><br>

  <div style="position:absolute; top:75%; left:20%; width:60%; display:flex; justify-content:space-between;">
    <button id="play-btn" onclick="showGame()">PLAY</button>
    <button id="instr-btn" onclick="showInstructions()">INSTRUCTIONS</button>
  </div>
  <div style="position:absolute; top:88%; left:50%; transform:translateX(-50%);">
    <button id="admin-btn" onclick="adminLogin()">Admin Login</button>
  </div>
</div>

<!-- Game Screen -->
<div class="container game-screen" id="game-screen">
  <h1>AAO GOLGAPPA KHAO</h1>
  <div id="mobile-display" style="font-size:16px; margin-bottom:5px;"></div>
  <div id="timer">Time: 30</div>
  <div id="score">Score: 0</div>
  <img src="thela.png" class="thela">
  <img src="boy.png" class="boy" id="boy-img">
  <img src="single.png" class="golgappa" id="golgappa">
  <div class="stomach-bar"><div class="stomach-fill" id="stomach"></div></div>
  <br>
  <button id="eat-btn" onclick="spawnGolgappa()">MUJHE GOLGAPPA KHANA HAI</button>
  <div class="game-over" id="game-over"></div>
</div>

<!-- Admin Panel -->
<div class="container admin-panel" id="admin-panel">
  <h2>Admin Panel</h2>
  <button onclick="closeAdmin()">Close Admin</button>
  <button onclick="resetHistory()">Reset History</button>
  <h3>Game History:</h3>
  <ul id="history-list"></ul>
</div>

<audio id="crunch" src="crunch.mp3"></audio>
<audio id="burp" src="burp.mp3"></audio>
<audio id="bgm" src="bgm.mp3" loop></audio>
<audio id="clap" src="clap.mp3"></audio>
<audio id="golden" src="golden.mp3"></audio> <!-- Golden golgappa sound -->

<script>
let mobileEntered=null, timer=30, score=0, stomach=0, timerInterval, gameActive=false, goldenUsed=false;

function submitMobile(){
  const mob=document.getElementById('mobile').value;
  if(mob.length!==10){ alert("Please enter valid 10-digit mobile number."); return; }
  let used=JSON.parse(localStorage.getItem('usedMobiles')||'[]');
  if(used.includes(mob)){ alert("This mobile number already used!"); return; }
  mobileEntered=mob; alert("Mobile submitted! Ab PLAY dabao.");
}

function showGame(){
  if(!mobileEntered){ alert("Pehle mobile number submit karo!"); return; }
  let used=JSON.parse(localStorage.getItem('usedMobiles')||'[]');
  used.push(mobileEntered);
  localStorage.setItem('usedMobiles', JSON.stringify(used));

  document.getElementById('start-screen').style.display='none';
  document.getElementById('game-screen').style.display='block';
  document.getElementById('mobile-display').innerText="Mobile: "+mobileEntered;
  startGame();
}

function startGame(){
  score=0; stomach=0; timer=30; gameActive=true; goldenUsed=false;
  document.getElementById('score').innerText="Score: 0";
  document.getElementById('timer').innerText="Time: 30";
  document.getElementById('stomach').style.height="0%";
  document.getElementById('stomach').style.background="green";
  document.getElementById('game-over').style.display='none';
  document.getElementById('boy-img').src="boy.png"; // boy always visible
  document.getElementById('boy-img').style.display="block"; // ensure visible
  document.getElementById('bgm').play();
  timerInterval=setInterval(()=>{
    timer--; document.getElementById('timer').innerText="Time: "+timer;
    if(timer<=0) endGame(false);
  },1000);
}

function spawnGolgappa(){
  if(!gameActive) return;
  let types=['normal','spicy','sweet','golden'];
  let type=types[Math.floor(Math.random()*types.length)];
  if(type==='golden' && goldenUsed) type='normal';
  if(type==='golden'){ goldenUsed=true; document.getElementById('golden').play(); }

  let gol=document.getElementById('golgappa');
  gol.style.display='block'; gol.style.left="140px";
  if(type==='golden'){ gol.classList.add('sparkle'); setTimeout(()=>{ gol.classList.remove('sparkle'); },800); }

  let pos=140;
  let move=setInterval(()=>{
    pos+=15; gol.style.left=pos+"px";
    if(pos>=430){ clearInterval(move); gol.style.display='none'; eatGolgappa(type); }
  },50);
}

function eatGolgappa(type){
  if(!gameActive) return;
  let stomachChange=0, points=0;
  switch(type){
    case 'normal': points=25; stomachChange=10; break;
    case 'spicy': points=25; stomachChange=20; break;
    case 'sweet': points=25; stomachChange=-10; break;
    case 'golden': points=50; stomachChange=0; break;
  }
  score += points;
  if(score>500) score=500;
  stomach += stomachChange;
  if(stomach<0) stomach=0; if(stomach>100) stomach=100;

  let stomachFill=document.getElementById('stomach');
  stomachFill.style.height = stomach+"%";
  stomachFill.style.background = (stomach>=100) ? "red" : "green";

  document.getElementById('score').innerText="Score: "+score;
  document.getElementById('crunch').play();

  if(stomach>=100){ document.getElementById('boy-img').src="boy-burp.png"; endGame(true); }
}

function endGame(overeat){
  clearInterval(timerInterval); gameActive=false; document.getElementById('bgm').pause();

  let msg=document.getElementById('game-over'); msg.style.display='block';
  let bonus = Math.min(Math.max(score,0),500);

  if(overeat) document.getElementById('burp').play();
  if(bonus>0) document.getElementById('clap').play();

  let message = (bonus>0) ? "CONGRATULATIONS 🎉" : "OH SORRY 😞";
  msg.innerHTML=`<h2>${message}</h2><p>Final Score: ${score}<br>Bonus Points: ${bonus}</p>`;

  // ensure boy visible at end
  if(overeat){ document.getElementById('boy-img').src="boy-burp.png"; }
  else { document.getElementById('boy-img').src="boy.png"; }
  document.getElementById('boy-img').style.display="block"; // FIX ADDED ✅

  if(mobileEntered){
    let history=JSON.parse(localStorage.getItem('golgappaHistory')||'[]');
    history.push({mobile:mobileEntered, score:score, bonus:bonus, date:new Date().toLocaleString()});
    localStorage.setItem('golgappaHistory', JSON.stringify(history));
  }
}

function showInstructions(){ 
  alert("Instructions:\n1. Mobile number submit karke PLAY karo.\n2. Press 'MUJHE GOLGAPPA KHANA HAI'.\n3. Normal(+25,+10%), Spicy(+25,+20%), Sweet(+25,-10%), Golden(+50 once).\n4. Stomach full → Overeat + burp.\n5. Crunch sound per bite, BGM loop, clap at result."); 
}

function adminLogin(){
  let pass=prompt("Enter admin password:");
  if(pass==='vipin@2025'){ document.getElementById('admin-panel').style.display='block'; showHistory(); }
  else alert("Wrong password!");
}
function closeAdmin(){ document.getElementById('admin-panel').style.display='none'; }
function showHistory(){
  let history=JSON.parse(localStorage.getItem('golgappaHistory')||'[]');
  let list=document.getElementById('history-list'); list.innerHTML='';
  history.forEach(entry=>{ let li=document.createElement('li'); li.innerText=`${entry.date} | Mobile: ${entry.mobile} | Score: ${entry.score} | Bonus: ${entry.bonus}`; list.appendChild(li); });
}
function resetHistory(){ if(confirm("Are you sure you want to reset all history?")){ localStorage.removeItem('golgappaHistory'); showHistory(); alert("History reset successfully!"); } }
</script>
</body>
</html>
